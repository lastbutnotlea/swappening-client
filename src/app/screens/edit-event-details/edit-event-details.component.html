<div class="back-button"></div>

<div class="details-container">

  <mat-card class="detail-card">
    <p class="input-info some-padding">headline</p>
    <input class="edit-headline" matInput [(ngModel)]="eventModel.headline">

    <div class="image-container">
      <img *ngIf="!isEdit && previewImage.length > 0" [src]="previewImage[clickCounter%numberOfPictures]"
           class="detail-image">
      <img
        *ngIf="isEdit && (event$ | async).pictures_events[clickCounter%(event$ | async).pictures_events.length]"
        src="{{this.apiUrl}}/files/{{(event$ | async).pictures_events[clickCounter%(event$ | async).pictures_events.length].pictureStorageName}}"
        class="detail-image">
      <div class="overlay" (click)="cycleThroughPictures()"></div>
      <mat-slide-toggle
        *ngIf="numberOfPictures > 0"
        (change)="makeFirst(clickCounter%(eventModel.pictures_events.length))"
        class="toggle-first"
        [checked]="checked"
      >Cover
      </mat-slide-toggle>
      <button class="delete-picture" [disabled]="numberOfPictures <= 1" mat-mini-fab (click)="deletePicture()">
        <img src="./assets/icons-black/substract.png">
      </button>
      <div class="upload-picture">
        <input
          style="display: none"
          type="file" (change)="onFileChanged($event)"
          #fileInput>
        <button class="plus" mat-mini-fab (click)="fileInput.click()">
          <img src="./assets/icons-black/add.png">
        </button>
      </div>
    </div>

    <p class="input-info">date and time</p>
    <input class="edit-date" [owlDateTime]="dt" [owlDateTimeTrigger]="dt" [(ngModel)]="eventModel.startTime">
    <owl-date-time [pickerMode]="'dialog'" #dt></owl-date-time>
    <p class="input-info">location</p>
    <input class="edit-single-line" matInput [(ngModel)]="eventModel.place">

    <p class="input-info some-padding">description</p>
    <textarea class="edit-multiple-lines" matInput [(ngModel)]="eventModel.description"></textarea>

  </mat-card>
</div>

<button mat-fab class="on-top-button-right" (click)="saveEvent()">Save</button>
<button *ngIf="isEdit" mat-fab class="on-top-button-left" (click)="deleteEvent()">
  <img class="delete-icon" src="./assets/icons-black/garbage-2.png">
</button>
